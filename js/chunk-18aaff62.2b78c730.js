(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18aaff62"],{"295d":function(i,t,s){"use strict";s("d5d1")},"95b9":function(i,t,s){"use strict";s("95de")},"95de":function(i,t,s){},aca7:function(i,t,s){"use strict";class e{constructor(){this.minappMap={minApp:[]},this.appMap={ChatRoom:{name:"ChatRoom",isLoad:!1,min:!0,icon:"💬",CName:"针针"},Brower:{name:"Brower",isLoad:!1,min:!0,icon:"🌐",CName:"浏览器"},Live2DShow:{name:"Live2DShow",isLoad:!1,min:!0,icon:"👯‍♀️",CName:"Live2D"},Lyre:{name:"Lyre",isLoad:!1,min:!0,icon:"🎹",CName:"风物之诗琴"},Clipboard:{name:"Clipboard",isLoad:!1,min:!0,icon:"🇨🇵",CName:"一键复制"},Video:{name:"Video",isLoad:!1,min:!0,icon:"📺",CName:"Flv播放器"}},this.focusApp={focus:null,name:null},window.focusApp=this.focusApp}getMinAppMap(){return this.minappMap}getAppInfo(i){return this.appMap[i]}minimize(i){this.appMap[i]&&(this.minappMap.minApp.push(this.appMap[i]),this.appMap[i].min=!1)}getAppMap(){return this.appMap}restore(i){const t=this.minappMap.minApp.indexOf(i);t>=0&&(this.minappMap.minApp.splice(t,1),i.min=!0)}closeApp(i){this.appMap[i]&&(this.appMap[i].isLoad=!1)}getTranslateParams(i,t,s,e,o,n,p,a){return[i.clientX-t+e,i.clientY-s+o]}setFocusApp(i){this.focusApp.focus=i,this.focusApp.name=i.AppInfo.name}getFocusApp(){return this.focusApp}mousemove(i){i.preventDefault();const t=this.focusApp.focus;if(t&&t.mouseDown){if("default"!==t.positionOnclick[6]){const s=i.clientX-t.positionOnclick[2],e=i.clientY-t.positionOnclick[3];return"ns-resize"!==t.positionOnclick[6]&&(t.size.width=t.positionOnclick[4]+s*t.direction[0]+"px",-1===t.direction[0]&&(console.log(t.positionOnclick[7],s,"px"),t.position.left=t.positionOnclick[7]+s+"px")),void("ew-resize"!==t.positionOnclick[6]&&(t.size.height=t.positionOnclick[5]+e*t.direction[1]+"px",-1===t.direction[1]&&(t.position.top=t.positionOnclick[8]+e+"px")))}if(t.isMove){const s=this.getTranslateParams(i,t.positionOnclick[2],t.positionOnclick[3],t.positionOnclick[0],t.positionOnclick[1],t.transform[0],window.innerWidth,window.innerHeight);t.transform[4]=s[0],t.transform[5]=s[1],t.transform=[...t.transform]}}}mouseup(i){const t=this.focusApp.focus;t&&t.mouseup&&t.mouseup(i)}keydown(i){const t=this.focusApp.focus;t&&t.onKeyDown(i)}}const o=new e;t["a"]=o},c201:function(i,t,s){"use strict";var e=function(){var i=this,t=i._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:i.AppInfo.min,expression:"AppInfo.min"}],class:(i.focusApp.name===i.AppInfo.name?"focus":"normal")+" fx-ver",style:{position:"absolute",transform:this.tf,width:this.size.width||"auto",height:this.size.height||"auto",cursor:this.cursor,top:this.position.top||"auto",left:this.position.left||"auto"},attrs:{id:i.AppInfo.name},on:{mousemove:i.mousemove,mousedown:i.mousedown}},[t("div",{class:(i.herderCss||"header")+" fx-ac fx-pj"},[i._t("header"),t("div",{staticClass:"fx-ac"},[t("span",{staticClass:"fa fa-minus-square fz18 middleButton",on:{click:i.minimize}}),t("span",{staticClass:"fa fa-square fz18 middleButton",on:{click:i.maximize}}),t("span",{staticClass:"fa fa-times fz18 middleButton",on:{click:i.closeApp}})])],2),i._t("main")],2)},o=[],n=s("aca7"),p={name:"AppBorder",props:{AppInfo:{type:Object,required:!0},herderCss:[String],size:{type:Object,default:()=>({})},position:{type:Object,default:()=>({})}},computed:{tf(){return"matrix("+this.transform.toString()+")"}},mounted(){this.mainBox=document.getElementById(this.AppInfo.name);let i=this.mainBox.getBoundingClientRect();this.position.left=i.left+"px",this.position.top=i.top+"px",n["a"].setFocusApp(this)},data(){return{focusApp:n["a"].getFocusApp(),mouseDown:!1,isMove:!1,positionOnclick:[],transform:[1,0,0,1,0,0],sizeChange:{isMax:!1,width:null,height:null,top:null,left:null},direction:[1,1],cursor:"default",mainBox:null}},methods:{onKeyDown(i){this.$parent.onKeyDown&&this.$parent.onKeyDown(i)},mousedown(i){let t=this.mainBox.getBoundingClientRect(),s=i.clientX-t.left,e=i.clientY-t.top;n["a"].setFocusApp(this),this.positionOnclick[2]=i.clientX,this.positionOnclick[3]=i.clientY,this.positionOnclick[6]=this.cursor,e<40&&(this.positionOnclick[0]=this.transform[4],this.positionOnclick[1]=this.transform[5],this.isMove=!0),s<t.width/2?this.direction[0]=-1:this.direction[0]=1,e<t.height/2?this.direction[1]=-1:this.direction[1]=1,this.positionOnclick[4]=t.width,this.positionOnclick[5]=t.height,this.positionOnclick[7]=Number(this.position.left.substring(0,this.position.left.length-2)),this.positionOnclick[8]=Number(this.position.top.substring(0,this.position.top.length-2)),this.mouseDown=!0},mouseup(){this.mouseDown&&"default"!==this.positionOnclick[6]&&this.$parent.onResize&&this.$parent.onResize(),this.mouseDown=!1,this.isMove=!1,this.positionOnclick[6]="default"},mousemove(i){let t=this.mainBox.getBoundingClientRect(),s=i.clientX-t.left,e=i.clientY-t.top,o=t.width-s,n=t.height-e;this.cursor=s<3&&e<3||n<3&&o<3?"nwse-resize":e<3&&o<3||s<3&&n<3?"nesw-resize":e<3||n<3?"ns-resize":s<3||o<3?"ew-resize":"default"},minimize(){n["a"].minimize(this.AppInfo.name)},maximize(){this.sizeChange.isMax?(this.size.width=this.sizeChange.width,this.size.height=this.sizeChange.height,this.position.top=this.sizeChange.top,this.position.left=this.sizeChange.left,this.sizeChange.isMax=!1,this.$nextTick(()=>{this.$parent.onResize&&this.$parent.onResize()})):(this.sizeChange.width=this.size.width,this.sizeChange.height=this.size.height,this.sizeChange.left=this.position.left,this.sizeChange.top=this.position.top,this.size.height="100%",this.size.width="100%",this.sizeChange.isMax=!0,this.position.top="0px",this.position.left="0px",this.transform=[1,0,0,1,0,0],this.$nextTick(()=>{this.$parent.onResize&&this.$parent.onResize()}))},closeApp(){this.$parent.closeApp&&this.$parent.closeApp(),n["a"].closeApp(this.AppInfo.name)}}},a=p,r=(s("295d"),s("2877")),c=Object(r["a"])(a,e,o,!1,null,"62483e28",null);t["a"]=c.exports},d5d1:function(i,t,s){},de64:function(i,t,s){"use strict";s.r(t);var e=function(){var i=this,t=i._self._c;return t("AppBorder",{attrs:{"app-info":i.Login,size:i.size},scopedSlots:i._u([{key:"header",fn:function(){return[t("div",{staticClass:"fx-ac"},[t("span",[i._v("👨‍⚖️用户登录")])])]},proxy:!0},{key:"main",fn:function(){return[t("div",{staticClass:"fx-ver loginBox"},[t("div",{staticClass:"bak"}),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm fx-ver fx-pac",attrs:{model:i.ruleForm,"status-icon":"",rules:i.rules,"label-width":"30px"}},[t("el-form-item",{attrs:{label:"📔",prop:"account"}},[t("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:i.ruleForm.account,callback:function(t){i.$set(i.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),t("el-form-item",{attrs:{label:"🔒",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:i.ruleForm.checkPass,callback:function(t){i.$set(i.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",{},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return i.submitForm("ruleForm")}}},[i._v("登录")]),t("el-button",{on:{click:function(t){return i.resetForm("ruleForm")}}},[i._v("重置")])],1)],1)],1)]},proxy:!0}])})},o=[],n=(s("d9e2"),s("c201")),p={name:"Login.vue",components:{AppBorder:n["a"]},data(){const i=(i,t,s)=>{""===t?s(new Error("请输入账号")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),s())},t=(i,t,s)=>{""===t?s(new Error("请输入密码")):s()};return{name:"Login",Login:{name:"Login",isLoad:!1,min:!0,shortcut:"fa-sign-in"},ruleForm:{account:"",checkPass:""},rules:{account:[{validator:i,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}]},size:{width:"435px",height:"315px"}}},methods:{submitForm(i){this.$refs[i].validate(i=>{if(!i)return console.log("error submit!!"),!1;this.$http.postBody("/api/login",{username:this.ruleForm.account,password:this.ruleForm.checkPass}).then(i=>{if(200===i.code){let t=i.msg;localStorage.setItem("token",t),this.$store.commit("setToken",t),this.$message.success("登录成功！"),this.$router.push("/desktop")}else this.$message.error(i.msg)}).catch(i=>{this.$message.error(i)})})},resetForm(i){this.$refs[i].resetFields()},closeApp(){this.$router.push("/desktop")}}},a=p,r=(s("95b9"),s("2877")),c=Object(r["a"])(a,e,o,!1,null,"01a42ca6",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-18aaff62.2b78c730.js.map